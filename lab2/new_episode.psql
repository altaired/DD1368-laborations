CREATE OR REPLACE FUNCTION new_episode()
  RETURNS trigger AS
$BODY$
BEGIN
 IF (SELECT NEW.parent_tconst
   FROM title_episode
   WHERE NEW.parent_tconst = (SELECT tconst FROM user_watch)) THEN
 DELETE *
  FROM user_watch
  WHERE tconst = NEW.parent_tconst
 END IF;

 RETURN NEW;
END;
$BODY$

